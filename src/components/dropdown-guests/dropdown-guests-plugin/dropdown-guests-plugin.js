!function(t){var i={};function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=i,s.d=function(t,i,e){s.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:e})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,i){if(1&i&&(t=s(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(s.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var n in t)s.d(e,n,function(i){return t[i]}.bind(null,n));return e},s.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(i,"a",i),i},s.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},s.p="",s(s.s=1)}([function(t,i,s){},function(t,i,s){"use strict";s.r(i);class e{constructor(t){this.itemList=t}getItemList(){return this.itemList}onIncrement(t){this.itemList[t]=this.itemList[t]+1}onDecrement(t){0!==this.itemList[t]&&(this.itemList[t]=this.itemList[t]-1)}onClear(){this.itemList=[0,0,0]}}class n{constructor(t,i){this.$this=t,this.isOpen=!1,this.itemList=i,this.init()}init(){this.$this.append($("<div />",{class:"dropdown-guest-list"}).append($("<div />",{class:"dropdown-guest-list__expression",on:{mousedown:()=>this.handleDropdownListExpressionMousedown()}}).append($("<span />",{class:"dropdown-guest-list__expression-text"})).append($("<i />",{class:"dropdown-guest-list__icon icon-expand_more"})).append($("<input />",{type:"text",class:"dropdown-guest-list__input",on:{focus:()=>this.handleDropdownListInputFocus()}}))).append($("<div />",{class:"dropdown-guest-list__container"}).append($("<div />",{class:"dropdown-guest-list__item-list"}).append($("<div />",{class:"dropdown-guest-list__item"}).append($("<span />",{text:"взрослые",class:"dropdown-guest-list__label"})).append($("<input />",{type:"button",value:"-",class:"dropdown-guest-list__btn",on:{click:()=>this.handleDropdownListBtnClick({type:"decrement",idx:0})}})).append($("<span />",{text:this.itemList[0],class:"dropdown-guest-list__value"})).append($("<input />",{type:"button",value:"+",class:"dropdown-guest-list__btn",on:{click:()=>this.handleDropdownListBtnClick({type:"increment",idx:0})}}))).append($("<div />",{class:"dropdown-guest-list__item"}).append($("<span />",{text:"дети",class:"dropdown-guest-list__label"})).append($("<input />",{type:"button",value:"-",class:"dropdown-guest-list__btn",on:{click:()=>this.handleDropdownListBtnClick({type:"decrement",idx:1})}})).append($("<span />",{text:this.itemList[1],class:"dropdown-guest-list__value"})).append($("<input />",{type:"button",value:"+",class:"dropdown-guest-list__btn",on:{click:()=>this.handleDropdownListBtnClick({type:"increment",idx:1})}}))).append($("<div />",{class:"dropdown-guest-list__item"}).append($("<span />",{text:"младенцы",class:"dropdown-guest-list__label"})).append($("<input />",{type:"button",value:"-",class:"dropdown-guest-list__btn",on:{click:()=>this.handleDropdownListBtnClick({type:"decrement",idx:2})}})).append($("<span />",{text:this.itemList[2],class:"dropdown-guest-list__value"})).append($("<input />",{type:"button",value:"+",class:"dropdown-guest-list__btn",on:{click:()=>this.handleDropdownListBtnClick({type:"increment",idx:2})}})))).append($("<div />",{class:"dropdown-guest-list__btns"}).append($("<input />",{type:"button",value:"очистить",class:"dropdown-guest-list__btn-clear",on:{click:()=>this.handleDropdownListBtnClearClick()}})).append($("<input />",{type:"button",value:"применить",class:"dropdown-guest-list__btn-apply",on:{click:()=>this.handleDropdownListBtnApplyClick(),blur:()=>this.handleDropdownListBtnLastBlur()}}))))),this.renderExpressionText(),this.renderBtnClear(),$(document).on("click",t=>this.handleDocumentClick(t))}renderExpressionText(){this.itemList[0]+this.itemList[1]+this.itemList[2]===0?this.$this.find(".dropdown-guest-list__expression-text").text("Сколько гостей"):this.itemList[0]+this.itemList[1]!==0&&0===this.itemList[2]?this.$this.find(".dropdown-guest-list__expression-text").text(""+this.declOfNum(this.itemList[0]+this.itemList[1],["сколько гостей","1 гость",this.itemList[0]+this.itemList[1]+" гостя",this.itemList[0]+this.itemList[1]+" гостей"])):0!==this.itemList[2]&&this.$this.find(".dropdown-guest-list__expression-text").text(`${this.declOfNum(this.itemList[0]+this.itemList[1],["0 гостей","1 гость",this.itemList[0]+this.itemList[1]+" гостя",this.itemList[0]+this.itemList[1]+" гостей"])}${this.declOfNum(this.itemList[2],["",", 1 младенец",`, ${this.itemList[2]} младенца`,`, ${this.itemList[2]} младенцев`])}`)}renderBtnClear(){this.itemList[0]+this.itemList[1]+this.itemList[2]===0?this.$this.find(".dropdown-guest-list__btn-clear").removeClass("dropdown-guest-list__btn-clear_active"):this.$this.find(".dropdown-guest-list__btn-clear").addClass("dropdown-guest-list__btn-clear_active")}updateItemList(t){this.itemList=t;const i=this.$this.find(".dropdown-guest-list__value");$(i[0]).text(this.itemList[0]),$(i[1]).text(this.itemList[1]),$(i[2]).text(this.itemList[2]),this.renderExpressionText(),this.renderBtnClear()}declOfNum(t,i){return t>=5?i[3]:t>=2&&t<=4?i[2]:1===t?i[1]:0===t?i[0]:i[1]}handleDropdownListBtnClick({type:t,idx:i}){this.$this.trigger(t,i)}handleDropdownListBtnClearClick(){this.$this.trigger("clear")}handleDropdownListBtnApplyClick(){this.$this.find(".dropdown-guest-list").removeClass("dropdown-guest-list_active"),this.isOpen=!1}handleDropdownListExpressionMousedown(){this.isOpen||this.$this.find(".dropdown-guest-list").addClass("dropdown-guest-list_active"),this.isOpen&&this.$this.find(".dropdown-guest-list").removeClass("dropdown-guest-list_active"),this.isOpen=!this.isOpen}handleDocumentClick(t){$(t.target).parents().is(this.$this)||(this.$this.find(".dropdown-guest-list").removeClass("dropdown-guest-list_active"),this.isOpen=!1)}handleDropdownListInputFocus(){this.$this.find(".dropdown-guest-list").addClass("dropdown-guest-list_active"),this.isOpen=!0}handleDropdownListBtnLastBlur(){this.$this.find(".dropdown-guest-list").removeClass("dropdown-guest-list_active"),this.isOpen=!1}}class o{constructor(t,i){this.$this=t,this.model=new e(i),this.view=new n(t,this.model.getItemList()),this.init()}init(){this.$this.on("increment",(t,i)=>{this.model.onIncrement(i),this.view.updateItemList(this.model.getItemList())}),this.$this.on("decrement",(t,i)=>{this.model.onDecrement(i),this.view.updateItemList(this.model.getItemList())}),this.$this.on("clear",()=>{this.model.onClear(),this.view.updateItemList(this.model.getItemList())})}}s(0);jQuery.fn.dropdownGuestList=function(t){return new o(this,t)}}]);