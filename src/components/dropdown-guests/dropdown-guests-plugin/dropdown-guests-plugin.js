!function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=1)}([function(t,e,s){},function(t,e,s){"use strict";s.r(e);class i{constructor(t){this.items=[{name:"Взрослые",value:t[0]},{name:"Дети",value:t[1]},{name:"Младенцы",value:t[2],endings:["","младенец","младенца","младенцев"]}],this.endings=["Сколько гостей","гость","гостя","гостей"]}getItems(){return this.items}getEndings(){return this.endings}updataItemValueIncriment(t){0!==this.items[t].value&&(this.items[t].value=this.items[t].value-1)}updataItemValueDicriment(t){this.items[t].value=this.items[t].value+1}clearItemsValue(){for(let t=0;t<this.items.length;t++)this.items[t].value=0}}class n{constructor(t,e,s){this.$this=t,this.items=e,this.endings=s,this.isShow=!1}init(){$(this.$this).addClass("dropdown-guests").append($("<div />",{class:"dropdown-guests__expression",text:"",on:{click:()=>{this.isShow?(this.$this.removeClass("dropdown-guests_active"),this.isShow=!1):(this.$this.addClass("dropdown-guests_active"),this.isShow=!0)}}})).append($("<div />",{class:"dropdown-guests__item-list"}));for(let t=0;t<this.items.length;t++)$(this.$this).find($(".dropdown-guests__item-list")).append($("<div />",{class:"dropdown-guests__item"}).append($("<span />",{class:"dropdown-guests__item-name",text:this.items[t].name})).append($("<input />",{type:"button",value:"-",class:"dropdown-guests__item-dicriment",on:{click:()=>this.$this.trigger("updataItemValueIncriment",{idx:t})}})).append($("<span />",{text:"",class:"dropdown-guests__item-value"})).append($("<input />",{type:"button",value:"+",class:"dropdown-guests__item-incriment",on:{click:()=>this.$this.trigger("updataItemValueDicriment",{idx:t})}})));$(this.$this).find(".dropdown-guests__item-list").append($("<div />",{class:"dropdown-guests__btns"}).append($("<input />",{type:"button",value:"Очистить",class:"dropdown-guests__btn-clear",on:{click:()=>this.$this.trigger("clearItemsValue")}})).append($("<input />",{type:"button",value:"Применить",class:"dropdown-guests__btn-apply",on:{click:()=>{this.$this.removeClass("dropdown-guests_active"),this.isShow=!1}}}))),$(document).click(t=>{$(t.target).parents().is(this.$this)||(this.$this.removeClass("dropdown-guests_active"),this.isShow=!1)}),this.updataExpression(),this.updataRenderItems()}updataItems(t){this.items=t,this.updataRenderItems()}updataRenderItems(){const t=$(this.$this).find(".dropdown-guests__item-value");for(let e=0;e<t.length;e++)$(t[e]).text(this.items[e].value);this.updataExpression(),this.updataRenderBtnClear()}updataExpression(){let t=0;for(let e=0;e<this.items.length;e++)t+=Number(this.items[e].value);let e=this.items[2].value,s="",i="";0===t?s=""+this.endings[0]:1===t?s=`${t} ${this.endings[1]}`:t>=2&&t<=4?s=`${t}  ${this.endings[2]}`:(t>=5||0===t)&&(s=`${t}  ${this.endings[3]}`),0===e?i=""+this.items[2].endings[0]:1===e?i=`, ${this.items[2].value} ${this.items[2].endings[1]}`:e>=2&&e<=4?i=`, ${this.items[2].value} ${this.items[2].endings[2]}`:e>=5&&(i=`, ${this.items[2].value} ${this.items[2].endings[3]}`),this.$this.find($(".dropdown-guests__expression")).text(`${s} ${i}`).append($("<i />",{class:"icon-expand_more"}))}updataRenderBtnClear(){let t=0;for(let e=0;e<this.items.length;e++)t+=Number(this.items[e].value);0===t?this.$this.find(".dropdown-guests__btn-clear").removeClass("dropdown-guests__btn-clear_active"):t>0&&this.$this.find(".dropdown-guests__btn-clear").addClass("dropdown-guests__btn-clear_active")}}class a{constructor(t,e){this.$this=t,this.model=new i(e),this.view=new n(t,this.model.getItems(),this.model.getEndings())}init(){this.view.init(),this.$this.on("updataItemValueIncriment",(t,e)=>{this.model.updataItemValueIncriment(e.idx),this.view.updataItems(this.model.getItems())}),this.$this.on("updataItemValueDicriment",(t,e)=>{this.model.updataItemValueDicriment(e.idx),this.view.updataItems(this.model.getItems())}),this.$this.on("clearItemsValue",()=>{this.model.clearItemsValue(),this.view.updataItems(this.model.getItems())})}}s(0);jQuery.fn.dropdownGuests=function(t){return this.add(new a(this,t).init())},$("#dropdown-guests-two").dropdownGuests([2,1,0])}]);